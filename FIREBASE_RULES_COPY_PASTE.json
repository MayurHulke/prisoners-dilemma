{
  "rules": {
    // Prisoner's Dilemma game results
    "games": {
      ".read": true,
      "$gameId": {
        ".write": "!data.exists()",
        ".validate": "newData.hasChildren(['cooperationRate', 'totalScore', 'rounds', 'timestamp'])",
        "cooperationRate": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 100"
        },
        "totalScore": {
          ".validate": "newData.isNumber() && newData.val() >= -1000 && newData.val() <= 1000"
        },
        "rounds": {
          ".validate": "newData.isNumber() && newData.val() >= 1 && newData.val() <= 100"
        },
        "timestamp": {
          ".validate": "newData.isNumber() && newData.val() <= now && newData.val() > now - 3600000"
        }
      }
    },

    // Prisoner's Dilemma round data
    "rounds": {
      ".read": true,
      "$roundId": {
        ".write": "!data.exists()",
        ".validate": "newData.hasChildren(['playerChoice', 'opponentChoice', 'result'])",
        "playerChoice": {
          ".validate": "newData.isString() && (newData.val() === 'cooperate' || newData.val() === 'betray')"
        },
        "opponentChoice": {
          ".validate": "newData.isString() && (newData.val() === 'cooperate' || newData.val() === 'betray')"
        },
        "result": {
          ".validate": "newData.isNumber() && newData.val() >= -10 && newData.val() <= 10"
        }
      }
    },

    // Ultimatum Game results
    "ultimatum-games": {
      ".read": true,
      "$gameId": {
        ".write": "!data.exists()",
        ".validate": "newData.hasChildren(['averageOffer', 'playerType', 'timestamp'])",
        "averageOffer": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 10"
        },
        "playerType": {
          ".validate": "newData.isString() && newData.val().length <= 50"
        },
        "timestamp": {
          ".validate": "newData.isNumber() && newData.val() <= now && newData.val() > now - 3600000"
        }
      }
    },

    // Tragedy of the Commons results
    "tragedy-games": {
      ".read": true,
      "$gameId": {
        ".write": "!data.exists()",
        ".validate": "newData.hasChildren(['totalFishCaught', 'lakeDied', 'timestamp'])",
        "totalFishCaught": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 500"
        },
        "lakeDied": {
          ".validate": "newData.isBoolean()"
        },
        "timestamp": {
          ".validate": "newData.isNumber() && newData.val() <= now && newData.val() > now - 3600000"
        }
      }
    },

    // Public Goods Game results
    "public-goods-games": {
      ".read": true,
      "$gameId": {
        ".write": "!data.exists()",
        ".validate": "newData.hasChildren(['avgContribution', 'finalWealth', 'timestamp'])",
        "avgContribution": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 10"
        },
        "finalWealth": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 500"
        },
        "timestamp": {
          ".validate": "newData.isNumber() && newData.val() <= now && newData.val() > now - 3600000"
        }
      }
    }
  }
}
